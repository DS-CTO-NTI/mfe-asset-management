<ngx-loading [show]="loading"></ngx-loading>
  <div class="row mx-0 mt-2" style="height: auto;">
    <div class="col-12 px-1">
      <div class="card">
        <div class="card-header bg-purple text-white">
          <div class="col-12 text-center" >
            <h6 class="ml-auto mb-0">{{assetConfiguration}}</h6>
          </div>
        </div>
  
        <div class="row mx-0" style="height: auto">
          <div class="col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2 px-1 mr-0 mb-2 mt-1" style="min-height: 100%">
            <div class="card">
              <div class="card-header bg-purple text-white">
                <div class="col-12 text-center">
                  <h6 class="ml-auto mb-0">{{assetList}}</h6>
                </div>
              </div>
              <div class="card-body p-0" [collapse]="isCollapsed2">
                <div class="col-12 p-0 border-right border-secondary h-100">
                  <div class="card-body bg-gray p-1">
                    <div class="row m-0">
                      <div class="col-12 px-1">
                        <div class="row">
                        </div>
                        <div class="d-flex flex-row m-0 mt-1">
                          <mat-form-field class="col-6 px-0 mr-2">
                            <mat-select id="devicetype" name="devicetype" [(ngModel)]="selectedDevices"
                              (selectionChange)="changeDevicesTypes(selectedDevices)">
                              <mat-option [value]="0">{{all}}</mat-option>
                              <mat-option [value]="allDevices.assetTypeSeq" *ngFor="let allDevices of deviceTypeAllList">
                                {{ allDevices.assetTypeName }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                          <div class="px-1">
                            <mat-form-field class="col-8 px-0">
                              <input matInput id="search" name="search" type="text" placeholder='Search Asset'
                                #searchInput (keyup)="searchDeviceTree(searchInput.value)" />
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="pl-3 pt-2 devList">
                    <span *ngIf="deviceList == null || deviceList.length == 0">{{noAssetsConfigured}}</span>
                    <tree-root #tree [nodes]="deviceHierarchyList" 
                      (activate)="showSelectedDevice($event.node.data.id, 'tree')" [options]="options"  >
                     <ng-template #treeNodeTemplate let-node let-index="index" ><span (contextmenu)="cellrightClick($event,node)" [contextMenu]="deviceTreeContextmenu">{{ node.data.displayField }}</span></ng-template>
                    </tree-root>
                    <context-menu #deviceTreeContextmenu *ngIf="deviceList != null">
                      <ng-template contextMenuItem (execute)="openEditModal()">{{edit}}</ng-template>
                      <ng-template contextMenuItem (execute)="openModal(true);">{{createChildAsset}}</ng-template>
                      <ng-template contextMenuItem (execute)="openCloneDevice(deviceCloneForm)">{{cloneAsset}}</ng-template>
                      <ng-template contextMenuItem (execute)="confirmDeleteDevice()">{{deleteAsset}}</ng-template> 
                    </context-menu>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12 col-sm-12 col-md-12 col-lg-10 col-xl-10 px-1 mb-2 mt-1">
            <div class="row m-0">
              <div id="mainDiv" class="col-sm-12 col-xs-12 col-lg-12 col-md-12 p-0 mb-2">
                <div class="card" id="card2">
  
                  <div class="card-header bg-purple text-white">
                    <div class="row" [ngClass]="!isFullScreen == false ? 'mar-200' : ''">
                      <div class="text-center col-12" >

                        <h6 class="mb-0 ">{{assetMap}}  
                       <span class="pull-right">
                        <em class="fa fa-download mr-3 cursor-pointer" *ngIf="isFullScreen" style="font-size: 24px;"
                          title={{downloadTemplate1}} (click)="downloadTemplate()" aria-hidden="true"></em>
                        <em class="fa fa-cloud-download cursor-pointer mr-3" *ngIf="isFullScreen"
                          style="font-size: 24px;" title={{downloadAsset}} (click)="getAllDeviceConfiguration()"
                          aria-hidden="true"></em>
                        <em class="fa fa-upload mr-3 cursor-pointer" *ngIf="isFullScreen" style="font-size: 24px;"
                          title={{uploadAsset}} (click)="importDeviceConfigurationModal.show()"></em>
                        <em class="fa fa-plus-circle mr-3 cursor-pointer" style="font-size: 24px;" title={{createAsset}}
                          *ngIf="isFullScreen" (click)="openModal(false);resetCreateAsset(form);"></em>
                          <img   class="cursor-pointer img-h "
                          [ngClass]="{'transform-img': !isFullScreen}" src="./assets/images/expand-arrows2 white.svg" 
                         alt="asset" 
                         (click)="expandDeviceMap()" style="margin-bottom:3px"
                         [title]="!isFullScreen?'Collapse Map':'Expand Map'">              
                      </span>
                        </h6>
                      </div> 
                    </div>
                  </div>
  
                  <div class="card-body p-0" [collapse]="isCollapsed">
                    <div class="container-fluid">
                      <div class="row">
                        <div class="col-12 p-0 mt-1">
                          <div class="row mt-0 mx-0">
                            <div class="row mx-0">
                              <div class="form-inline m-2">
                                <mat-form-field class="example-full-width">
                                  <mat-label for="statusGroupDD" class="mr-2"><strong translate>{{statusGroup}}</strong>
                                  </mat-label>
  
                                  <mat-select name="statusGroupDD" id="statusGroupDD"
                                    [(ngModel)]="selectedMemsDeviceStatusGroup" (selectionChange)="changeStatusGroup()">
                                    <mat-option *ngFor="let status of memsDeviceStatusGroupList"
                                      [value]="status.statusCodeGroup">
                                      {{ status.statusCodeGroup }}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                              <div class="form-inline m-2">
  
                                <mat-checkbox class="example-margin" [checked]="isAutoRefresh"
                                  (change)="toggleAutoRefresh()">{{autoRefresh}}</mat-checkbox>
                              </div>
                              <div class="form-inline m-2">
                                <label for="refreshFrequency" class="mr-2"><strong>{{refreshFrequency1}}</strong></label>
                                <mat-form-field class="example-full-width">
                                  <mat-select name="refreshFrequency" id="refreshFrequency" [disabled]="!isAutoRefresh"
                                    [(ngModel)]="refreshFrequency" (selectionChange)="changeRefreshFrequency()">
                                    <mat-option *ngFor="let f of assetRefreshFrequency" [value]="f.codeValue">
                                      {{ f.codeDisplayTxt }}
                                    </mat-option>
  
                                  </mat-select>
                                </mat-form-field>
                              </div>
                            </div>
                            <div id="mapDiv" class="col-12 px-0 " [ngClass]="!isFullScreen?'mapfullscreen':'map'">
                              <agm-map #gm class="agmmapheight" [latitude]="lat" [longitude]="lng" [zoom]="zoom"
                              [disableDefaultUI]="true" (mapReady)="mapReady($event)"
                                 [scrollwheel]="false"   >
                                <agm-marker [class.highlight]="selectedDevice.assetId == marker.deviceid"
                                  *ngFor="let marker of markers" [latitude]="marker.lat" [longitude]="marker.lng"
                                  [iconUrl]="markerUrl(marker.deviceid)" [openInfoWindow]="false"
                                  (mouseOver)="mouseOver(gm, infoWindow, marker.deviceid)"
                                  (mouseOut)="mouseOut(gm, marker.deviceid)"
                                  (markerClick)="showSelectedDevice(marker.deviceid, 'marker')">
                                  <agm-info-window #infoWindow [isOpen]="isSelectedDevice(marker.deviceid)">
                                    {{assetId}}: {{ marker.deviceid }}<br />
                                    {{parentAssetId}}: {{ marker.parentAssetid }}<br />
                                    {{description}}: {{ marker.description }}<br />
                                  </agm-info-window>
                                </agm-marker>
                              </agm-map>
                              <div *ngIf="selectedMemsDeviceStatusGroup != 'None'" class="row ml-0 legend">
                                <div class="col-12 row mx-0 mb-2" *ngFor="let item of legendItems">
                                  <img class="mr-1" alt="" [src]="'assets/images/markers/' + item.statusColor + '.png'"
                                    width="20" height="20" />
                                  <div>{{ item.statusCode }}</div>
                                </div>
                              </div>
                            </div>
                          </div>
  
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
  
  
              </div>
  
              <!-- Selected Device -->
              <div id="selectedDeviceContainer" class="col-12 p-0">
                <div class="card bg-sblue">
                  <div class="card-header border-0">
                    <div class="row">
                      <div class="col-11 text-center">
                        <h6 class="mb-0 ml-auto">{{selectedAsset}}{{ selectedDeviceShow.assetId }}</h6>
                      </div>
                      <div class="col-1 float-right">
                        <em class="fa fa-pencil-square-o float-right cursor-pointer mr-2" title={{editAsset}}
                          style="font-size: 24px;" (click)="openEditModal()" *ngIf="deviceListData!=null && deviceListData.length>0"></em>
                      </div>
                    </div>
                  </div>
                  <div class="card-body" [collapse]="isCollapsed1">
                    <div class="container-fluid p-0">
                      <div class="row">
                        <div class="container-fluid">
                          <mat-tab-group #selectedTabs id="selectedTabs" [selectedIndex]="selectedTabIndex"
                            (selectedTabChange)="onViewTabChanged($event);">
                            <mat-tab label={{assetInformation}} (selectTab)="setHeightDeviceInfo($event)">
                              <div class="row mt-3" style="height: 310px;width: 100%;">
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="ven_seq">{{vendor}}</mat-label>
                                  <mat-select id="ven_seq" name="ven_seq" [(ngModel)]="selectedDeviceShow.vendorSeq"
                                    disabled>
                                    <mat-option [value]="vendor1.vendorSeq" *ngFor="let vendor1 of vendorsList">{{
                                      vendor1.vendorName }}</mat-option>
                                  </mat-select>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="inputStateselected">{{assetType}}</mat-label>
                                  <mat-select id="inputStateselected" name="inputStateselected"  [(ngModel)]="selectedDeviceShow.assetTypeSeq"
                                     disabled>
                                    <mat-option [value]="type.assetTypeSeq" *ngFor="let type of deviceTypeList" >
                                      {{ type.assetTypeName }}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="devid">{{assetId}}</mat-label>
                                  <input matInput type="text" name="moid" id="devid" [readonly]="isEdit"
                                    [(ngModel)]="selectedDeviceShow.assetId" [readonly]="false" disabled required />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="p_devidShow">{{assetClass}}</mat-label>
                                  <mat-select id="p_devidShow" name="p_devidShow"
                                    (selectionChange)='onAssetClassSelected(selectedDeviceShow.assetClass)'
                                    [(ngModel)]="selectedDeviceShow.assetClass" required disabled>
                                    <mat-option value="null" [disabled]="false">{{choose}}</mat-option>
                                    <mat-option *ngFor="let device of assetClass1" [value]="device.codeDisplayTxt"
                                      [hidden]="isSelected(device.assetClass)">
                                      {{ device.codeDisplayTxt }}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="p_devid">{{parentAssetId}}</mat-label>
                                  <mat-select id="p_devid" name="p_devid" [(ngModel)]="selectedDeviceShow.parentAssetid"
                                    disabled>
                                    <mat-option value="null" [disabled]="false">{{choose}}</mat-option>
                                    <mat-option *ngFor="let device of deviceListByClass" [value]="device.assetId"
                                      [hidden]="isSelected(device.assetId)">
                                      {{ device.assetId }}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
  
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="latitude">{{latitude}}</mat-label>
                                  <input matInput type="number" name="latitude" id="latitude" [readonly]="isEdit"
                                    [(ngModel)]="selectedDeviceShow.latitude" disabled required />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="longitude">{{longitude}}</mat-label>
                                  <input matInput type="number" name="longitude" id="longitude" [readonly]="isEdit"
                                    [(ngModel)]="selectedDeviceShow.longitude" disabled required />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="location">{{location}}</mat-label>
                                  <input matInput type="text" name="location" id="location" [readonly]="isEdit"
                                    [(ngModel)]="selectedDeviceShow.location" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="timezone">{{assetTimezone}}</mat-label>
                                  <mat-select id="timezone" name="timezone" [(ngModel)]="selectedDeviceShow.assetTz"
                                    disabled>
                                    <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                                    <mat-option *ngFor="let timezone of timezoneList" [value]="timezone.codeDisplayTxt">
                                      {{ timezone.codeDisplayTxt }}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
                               
                                <div class="form-group col-sm-6 col-md-6 col-lg-3 col-xl-3 pt-4 mt-2">
                                  <mat-checkbox class="example-margin" [checked]="checkDeviceTypeEdit() == true" disabled>
                                    {{isVirtualAsset}}</mat-checkbox>
                                </div>
                              </div>
                            </mat-tab>
  
                            <mat-tab label={{assetDetails}} (selectTab)="setHeightDeviceDetails($event)">
                              <div class="row mt-3 p-0" style="height: 310px;width: 100%;">
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="dev_ip_address">{{assetIpAddress}}</mat-label>
                                  <input matInput type="text" name="dev_ip_address" #devipaddress="ngModel"
                                    id="dev_ip_address" [readonly]="isEdit" [(ngModel)]="selectedDeviceShow.assetIpaddr"
                                    pattern="(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)"
                                    disabled />
                                  <div *ngIf="devipaddress.invalid && devipaddress.errors.pattern"
                                    class="alert alert-danger">
                                    {{ipAddressNotValid}}
                                  </div>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="dev_name">{{assetName}}</mat-label>
                                  <input matInput type="text" name="dev_name" id="dev_name"
                                    [(ngModel)]="selectedDeviceShow.assetName" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="dev_userid">{{assetUserId}}</mat-label>
                                  <input matInput type="text" name="dev_userid" id="dev_userid"
                                    [(ngModel)]="selectedDeviceShow.assetUserid" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="dev_pass">{{assetPassword}}</mat-label>
                                  <input type="text" matInput name="dev_pass" id="dev_pass"
                                    [(ngModel)]="selectedDeviceShow.assetPassword" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="dev_access">{{assetAccessPort}}</mat-label>
                                  <input type="number" matInput name="dev_access" id="dev_access"
                                    [(ngModel)]="selectedDeviceShow.assetAccessPort" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="dev_access_type">{{assetAccessType}}</mat-label>
                                  <input type="text" matInput name="dev_access_type" id="dev_access_type"
                                    [(ngModel)]="selectedDeviceShow.assetAccessType" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="dev_alias">{{assetAlias}}</mat-label>
                                  <input matInput type="text" name="dev_alias" id="dev_alias"
                                    [(ngModel)]="selectedDeviceShow.assetAlias" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="deviceRecordVer">{{assetRecordVersion}}</mat-label>
                                  <input matInput type="text" name="deviceRecordVer" [maxLength]="4" id="deviceRecordVer"
                                    [(ngModel)]="selectedDeviceShow.assetRecordVer" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="description"> {{description}}</mat-label>
                                  <input matInput type="text" name="description" [readonly]="isEdit" id="description"
                                    [(ngModel)]="selectedDeviceShow.description" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="geox">{{geoX}}</mat-label>
                                  <input matInput type="number" name="sgeox" id="geox"
                                    [(ngModel)]="selectedDeviceShow.geoX" disabled />
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="geoy">{{geoY}}</mat-label>
                                  <input type="number" matInput name="geoy" id="geoy"
                                    [(ngModel)]="selectedDeviceShow.geoY" disabled />
                                </mat-form-field>
  
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="grp_seq">{{group}}</mat-label>
                                  <mat-select id="grp_seq" name="grp_seq" [(ngModel)]="selectedDeviceShow.groupSeq"
                                    disabled required>
                                    <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                                    <mat-option [value]="group.groupSeq" *ngFor="let group of deviceGroupsList" >
                                      {{  group.groupName  }}
                                    </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="installationDate">{{installationDate}}</mat-label>
                                  <div class="d-flex justify-content-end">
                                 
                                    <input matInput type="text" name="installationDate" placeholder="MM/DD/YYYY hh:mm:ss"
                                      class="caldate mr-2 inputWidth" id="installationDate"
                                      [(ngModel)]="selectedDeviceShow.installationDate" [owlDateTime]="dp1"
                                      [max]="maxFromAndTo()" required disabled />
                                    <span [owlDateTimeTrigger]="dp1"><em
                                        class="fa fa-calendar cursor-pointer"></em></span>
                                    <owl-date-time [hour12Timer]="true" #dp1></owl-date-time>
                                 
                                  </div>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="registrationTs">{{registrationTime}}</mat-label>
                                  <div class="d-flex justify-content-end">
                                  
                                    <input matInput type="text" name="startdate" placeholder="MM/DD/YYYY hh:mm:ss"
                                      class="caldate mr-2 inputWidth" id="startdate"
                                      [(ngModel)]="selectedDeviceShow.registrationTs" [owlDateTime]="dp2"
                                      [max]="maxFromAndTo()" required disabled />
                                    <span [owlDateTimeTrigger]="dp2"><em
                                        class="fa fa-calendar cursor-pointer"></em></span>
                                    <owl-date-time [hour12Timer]="true" #dp2></owl-date-time>
                                  </div>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="provisioningTs">{{provisioningTime}}</mat-label>
                                  <div class="d-flex justify-content-end">
                                   
                                    <input matInput type="text" name="provisioningTs" placeholder="MM/DD/YYYY hh:mm:ss"
                                      class="caldate mr-2 inputWidth" id="provisioningTs"
                                      [(ngModel)]="selectedDeviceShow.registrationTs" [owlDateTime]="dp3"
                                      [max]="maxFromAndTo()" required disabled />
                                    <span [owlDateTimeTrigger]="dp3"><em
                                        class="fa fa-calendar cursor-pointer"></em></span>
                                    <owl-date-time [hour12Timer]="true" #dp3></owl-date-time>
                                  </div>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                                  <mat-label for="altitude">{{altitude}}</mat-label>
                                  <input matInput type="text" name="altitude" id="altitude" [readonly]="isEdit"
                                    [(ngModel)]="selectedDeviceShow.altitude" disabled />
                                </mat-form-field>
                              </div>
                            </mat-tab>
  
                            <mat-tab label={{measurement}} *ngIf="checkDeviceTypeEdit() == true"
                              (selectTab)="sizeColumnsMeasurementShow($event)">
                              <div class="row p-0" style="width: 100%; height:323px">
                                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-3 px-3">
                                  <p class="my-2" style="font-size: 15px">{{outputMeasurements}}</p>
                                  <div class="" style="border: 1px solid deepskyblue">
                                    <div class="row justify-content-between mx-0">
                                      <div class="m-2 ml-3" style="padding-top: 2px">
                                        <strong style="font-size: 14px; letter-spacing: 1px; color: #8c2121">{{filters}}
                                        </strong>
                                        <strong *ngIf="measurementNameShowTableFilter==null || measurementNameShowTableFilter.length==0" style="color: #536c79">
                                          {{noFilterSelected}}</strong>
                                        <span class="filter-tabs" *ngFor="let filter of measurementNameShowTableFilter">
                                          {{ filter }}
                                          <a (click)="clearFilterMeasurementNameShowTable(filter)"
                                            class="pl-2 cursor-pointer">&times;</a>
                                        </span>
                                      </div>
  
                                      <ag-grid-angular id="measurementNameShowGrid" name="measurementNameShowGrid"
                                        #measurementNameShowGrid style="width: 19.5vw; height: 480vh"
                                        class="ag-theme-balham" (filterChanged)="filterModifiedMeasurementNameShowTable()"
                                        (sortChanged)="measurementNameShowTableSortChange($event)"
                                        [rowClassRules]="rowClassRuleMeasurementNameShowTable"
                                        (rowClicked)="selectMeasurementShow($event)"
                                        [gridOptions]="measurementNameShowGridOptions"
                                        [rowData]="measurementNameShowRowData"
                                        [columnDefs]="measurementNameShowColumnDefs">
                                      </ag-grid-angular>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-9 px-3">
                                  <form #form="ngForm">
                                    <div class="row justify-content-between mx-0">
                                      <p class="my-2" style="font-size: 15px">{{equation}}</p>
                                    </div>
                                    <div class="col-sm-12 col-xs-12 col-md-12 col-lg-12 row mx-0 p-0 mb-2"
                                      style="border: 1px solid deepskyblue">
                                      <div class="row mx-0 col-12 p-2">
                                        <div class="form-inline col-sm-12 col-md-8 col-lg-7 col-xl-7 p-2">
                                          <mat-form-field class="example-full-width" style="width: 220px;">
                                            <mat-label class="pr-1">{{outputMeasurementName}}</mat-label>
                                          <input type="text" matInput name="measurementName1"
                                            id="measurementName1" [(ngModel)]="measurementShow.assetMeasurementName"
                                            required disabled />
                                            </mat-form-field>
                                        </div>
  
  
                                        <div class="form-inline col-sm-12 col-md-4 col-lg-5 col-xl-5 p-0">
                                          <mat-form-field class="example-full-width">
                                          <mat-label class="pr-1">{{UOM1}}</mat-label>
                                          <mat-select id="uom" name="uom"
                                            [(ngModel)]="measurementShow.uom" required disabled>
                                            <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                                            <mat-option [value]="codetype.codeDisplayTxt" *ngFor="let codetype of codeTypeList">
                                              {{ codetype.codeDisplayTxt }}
                                            </mat-option>
                                          </mat-select>
                                        </mat-form-field>
                                        </div>
  
  
  
  
  
                                      </div>
                                      <div class="col-sm-8 col-md-12 col-lg-12 col-xl-12 p-0">
                                        <div class="row justify-content-between mx-0">
                                          <div class="mb-2 ml-3" style="padding-top: 2px">
                                            <strong style="font-size: 14px; letter-spacing: 1px; color: #8c2121">{{filters}}
                                            </strong>
                                            <strong *ngIf="measurementInputShowTableFilter==null || measurementInputShowTableFilter.length==0" style="color: #536c79">
                                              {{noFilterSelected}}</strong>
                                            <span class="filter-tabs"
                                              *ngFor="let filter of measurementInputShowTableFilter">
                                              {{ filter }}
                                              <a (click)="clearFiltermeasurementInputShowTable(filter)"
                                                class="pl-2 cursor-pointer">&times;</a>
                                            </span>
                                          </div>
                                        </div>
                                        <ag-grid-angular id="measurementInputShowGrid" name="measurementInputShowGrid"
                                          #measurementInputShowGrid style="height: 160px;  width: 100%" class="ag-theme-balham"
                                          [rowClassRules]="rowClassRuleMeasurementInputTable"
                                          [gridOptions]="measurementInputGridOptions"
                                          (filterChanged)="filterModifiedMeasurementInputShowTable()"
                                          (sortChanged)="measurementInputShowGridSortChange($event)"
                                          (rowDoubleClicked)="rowDoubleClickMeasurementInput($event)"
                                          [rowData]="measurementInputRowData" (gridReady)="sizeToFitForShowSelectedMeas()"
                                          [columnDefs]="measurementInputColumnDefs">
                                        </ag-grid-angular>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                          <div class="row">
                                            <div class="form-inline col-6 p-2">
                                              <div class="row mx-0 equbtn" style="margin-top: 31px;">
                                                <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                                  [value]="1" (click)="setValue(1)" disabled>
                                                  +
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                                  [value]="2" (click)="setValue(2)" disabled>
                                                  -
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                                  [value]="3" (click)="setValue(3)" disabled>
                                                  /
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.8rem" [value]="4" (click)="setValue(4)" disabled>
                                                  %
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.95rem" [value]="5" (click)="setValue(5)" disabled>
                                                  *
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                                  [value]="6" (click)="setValue(6)" disabled>
                                                  =
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                                  [value]="7" (click)="setValue(7)" disabled>
                                                  &#60;
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                                  [value]="8" (click)="setValue(8)" disabled>
                                                  >
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.85rem" [value]="9" (click)="setValue(9)" disabled>
                                                  &
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.7rem" [value]="10" (click)="setValue(10)" disabled>
                                                  &#60;&#61;
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.65rem" [value]="11" (click)="setValue(11)" disabled>
                                                  >=
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.85rem" [value]="12" (click)="setValue(12)" disabled>
                                                  !=
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.97rem" [value]="13" (click)="setValue(13)" disabled>
                                                  |
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.7rem" [value]="14" (click)="setValue(14)" disabled>
                                                  ==
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.99rem" [value]="17" (click)="setValue(17)" disabled>
                                                  &#40;
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.99rem" [value]="18" (click)="setValue(18)" disabled>
                                                  &#41;
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.99rem" [value]="19" (click)="setValue(19)" disabled>
                                                  &#91;
                                                </button>
                                                <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                                  style="padding: 0.99rem" [value]="20" (click)="setValue(20)" disabled>
                                                  &#93;
                                                </button>
                                              </div>
                                            </div>
                                            <div class="form-inline col-6 p-2">
                                              <label class="">{{equation}}</label>
                                              <textarea cols="100" rows="4" name="equationExpressionInput"
                                                id="equationExpressionInput"
                                                [(ngModel)]="measurementShow.calculationEquation" disabled></textarea>
                                            </div>
                                          </div>
                                          <div class="text-center mb-2">
                                            <button type="button" class="btn btn-success btn-sm mr-2" disabled>
                                              <em class="fa fa-save mr-1"></em>{{saveMeasurement1}}
                                            </button>
                                            <button type="button" class="btn btn-primary btn-sm mr-2" disabled>
                                              <em class="fa fa-check mr-1"></em>{{validate}}
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </form>
                                </div>
                              </div>
                            </mat-tab>
  
                            <mat-tab label="Measurements" *ngIf="checkDeviceTypeEdit() == false"
                              (selectTab)="sizeColumnsMeasurementNewShow($event)">
                              <div class="row mt-2" style="width: 100%;">
                                <mat-form-field class="example-full-width col-4">
                                  <mat-label for="sysinterface">{{systemInterface1}}</mat-label>
                                  <mat-select id="sysinterface" name="sysinterface"
                                    [(ngModel)]="selectedDeviceShow.systemInterface" disabled>
                                    <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                                    <mat-option [value]="s.codeDisplayTxt" *ngFor="let s of systemInterface" >
                                      {{  s.codeDisplayTxt }}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-4">
                                  <mat-label for="protocol">{{protocol1}}</mat-label>
                                  <mat-select id="protocol" name="protocol"
                                    [(ngModel)]="selectedDeviceShow.protocol" disabled>
                                    <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                                    <mat-option [value]="p.codeDisplayTxt" *ngFor="let p of protocol" >
                                      {{  p.codeDisplayTxt }}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
                                <mat-form-field class="example-full-width col-4">
                                  <mat-label for="adapter">{{adapter1}}</mat-label>
                                  <mat-select id="adapter" name="adapter" [(ngModel)]="selectedDeviceShow.adapter"
                                    disabled>
                                    <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                                    <mat-option [value]="a.codeDisplayTxt" *ngFor="let a of adapter" >
                                      {{  a.codeDisplayTxt }}
                                    </mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                              <div class="row mx-0">
                                <div class="row justify-content-between mx-0 p-0 col-12">
                                  <div class="ml-3 m-2">
                                    <strong style="font-size: 16px; letter-spacing: 1px; color: #8c2121">{{filters}}</strong>
                                    <strong *ngIf="deviceMeasurementNewSelectedFilter==null || deviceMeasurementNewSelectedFilter.length==0" style="color: #536c79">{{noFilterSelected}}</strong>
                                    <span class="filter-tabs" *ngFor="let filter of deviceMeasurementNewSelectedFilter">
                                      {{ filter }}
                                      <a (click)="clearFilterDeviceMeasurementNewSelectedTable(filter)"
                                        class="pl-2 cursor-pointer">&times;</a>
                                    </span>
                                  </div>
                                </div>
                                <ag-grid-angular id="deviceMeasurementNewSelectedGrid"
                                  name="deviceMeasurementNewSelectedGrid" #deviceMeasurementNewSelectedGrid
                                  style="height: 215px; width: 100%" class="ag-theme-balham"
                                  (filterChanged)="filterModifiedDeviceMeasurementNewSelectedTable()"
                                  (sortChanged)="deviceMeasurementNewSelectedSortChange($event)"
                                  [rowClassRules]="rowClassRuleDeviceMeasurementNewSelectedTable"
                                  [gridOptions]="deviceMeasurementNewSelectedGridOptions"
                                  [rowData]="deviceMeasurementNewEditRowData"
                                  [columnDefs]="deviceMeasurementNewSelectedColumnDefs"></ag-grid-angular>
  
                              </div>
                            </mat-tab>
  
                            <mat-tab label="Attribute">
                              <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%; height:323px">
                                <div class="form-row">
                                  <div class="form-row mt-3 ml-0" style="width: 100%" *ngIf="attributesList.length > 0">
                                    <mat-form-field class="example-full-width col-12 col-sm-6 col-md-6 col-lg-3 col-xl-3" *ngFor="let item of attributesList">
                                      <mat-label>{{ item.name }}</mat-label>
                                      <input matInput type="text" name="{{ item.name }}" id="{{ item.name }}" [(ngModel)]="item.value" disabled readonly  />
                                    </mat-form-field>
                                  </div>
                                  <div class="form-row ml-0" style="width: 100%" *ngIf="!(attributesList.length > 0)">
                                    <div class="form-group col-12 mt-4 mb-0">
                                      <h6>No Attribute Selected</h6>
                                    </div>
                                  </div>
                                  <div class="form-row ml-0" style="width: 100%">
                                    <div class="form-group col-12 mt-4 mb-0">
                                      <h6></h6>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </mat-tab>
  
                            <mat-tab label={{picture}}>
                              <div class="col-md-12 ml-0 text-center"
                                style="padding: 125px 1px; height: 323px; width: 100vw;"
                                *ngIf="selectedDeviceShow.assetPicture?.length == 0" disabled>
                                <div class="form-group col-12 mb-0">
                                  <h6>{{noPictureSelected}}</h6>
                                </div>
                              </div>
                              <div class="col-12 py-2" style="height: 310px; width: 100%"
                                *ngIf="selectedDeviceShow.assetPicture?.length != 0" disabled>
                                <div class="row">
                                  <div *ngFor="let picture of selectedDeviceShow.assetPicture"
                                    class="col-md-2 text-center mx-3" style="width: 230px; padding: 15px 1px">
                                    <div class="col-md-2">
                                      <div class="row">
                                        <img class="selectedDevicePicture" alt="" style="width: 230px; height: 230px"
                                          [src]="'data:image/png;base64,' + picture.pictureFile"
                                          (click)="showFullScreen(picture)" />
                                        <div style="font-size: 16px; margin-left: 90px;" class="text-center">{{
                                          picture.pictureTitle }}</div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </mat-tab>
  
                            <mat-tab label={{notes}}>
                              <div class="row mt-3" style="margin-left: 5px;">
                                <div class="row">
                                  <div class="ml-4 mb-2">
                                    <strong
                                      style="font-size: 16px; letter-spacing: 1px; color: #8c2121;margin-left: 5px;">{{filters}}
                                    </strong>
                                    <strong *ngIf="deviceNotesViewTableFilter==null || deviceNotesViewTableFilter.length==0 " style="color: #536c79">{{noFilterSelected}}</strong>
                                    <span class="filter-tabs" *ngFor="let filter of deviceNotesViewTableFilter">
                                      {{ filter }}
                                      <a (click)="clearFilterDeviceNotesView(filter)"
                                        class="pl-2 cursor-pointer">&times;</a>
                                    </span>
                                  </div>
                                </div>
                                <ag-grid-angular id="deviceNotesView" name="deviceNotesView" #deviceNotesView
                                  style="height: 278px; font-size: 14.2px; width: 100%" class="ag-theme-balham"
                                  (filterChanged)="filterModifieddeviceNotesView()"
                                  (sortChanged)="deviceNotesViewSortChange($event)"
                                  (cellDoubleClicked)="openAddNote(false, false, true, $event)"
                                  [rowClassRules]="rowClassRulesdeviceNotesView"
                                  [gridOptions]="gridOptionsdeviceNotesView" [rowData]="selectedDevice.assetNotes"
                                  [columnDefs]="columnDefsdeviceNotesView">
                                </ag-grid-angular>
                              </div>
                            </mat-tab>
                          </mat-tab-group>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Create Modal -->
<div bsModal #createModal="bs-modal" [config]="{ ignoreBackdropClick: true, keyboard: false }" class="modal fade fadeIn"
  tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name21">
  <div class="modal-dialog modal-2x">
    <div class="modal-content">
      <div class="modal-header bg-purple text-white pt-1 pb-1">
        <h6 class="ml-auto mb-0" *ngIf="!titleForCreateAsset">{{createAsset}}</h6>
        <h6 class="ml-auto mb-0" *ngIf=titleForCreateAsset>{{createChildAsset}}</h6>
        <button type="button" class="close pull-right text-white" aria-label="Close" (click)="closeModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid p-0">
          <form #form="ngForm">
            <mat-tab-group #createTabs id="createTabs" [(selectedIndex)]="selectedCreateTabIndex"
              (selectedTabChange)="onCreateTabChanged($event);" >
              <mat-tab label="Asset Information">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="row mt-3">
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="ven_seqCreate">Vendor</mat-label>
                      <mat-select id="ven_seqCreate" name="ven_seqCreate"
                        (selectionChange)="getDeviceTypesByVendor(newDevice.vendorSeq)"
                        [(ngModel)]="newDevice.vendorSeq" required>
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let vendor of vendorsList" [value]="vendor.vendorSeq">
                          {{ vendor.vendorName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="inputStateCreate">{{assetType}}</mat-label>
                      <mat-select id="inputStateCreate" name="inputStateCreate"
                        (selectionChange)="showCreateAttributes(newDevice.assetTypeSeq)"
                        [(ngModel)]="newDevice.assetTypeSeq" required>
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let type of deviceTypeList" [value]="type.assetTypeSeq">
                          {{ type.assetTypeName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="devidCreate">{{assetId}}</mat-label>
                      <input matInput type="text" name="moid" id="devidCreate" [(ngModel)]="newDevice.assetId"
                        required />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="p_devid">{{assetClass}}</mat-label>
                      <mat-select id="p_devidCreate1" name="p_devidCreate1"
                        (selectionChange)='onAssetClassSelected(newDevice.assetClass)'
                        [(ngModel)]="newDevice.assetClass" [disabled]="AssetClassDisabled" required>
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let device of assetClass1" value="{{ device.codeDisplayTxt }}">
                          {{ device.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="p_devidCreate">{{parentAssetId}}</mat-label>
                      <mat-select id="p_devidCreate" name="p_devidCreate" [(ngModel)]="newDevice.parentAssetid"
                        [disabled]="parentAssetIdDisabled">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let device of deviceListByClass" value="{{ device.assetId }}">
                          {{ device.assetId }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="latitudeCreate">{{latitude}}</mat-label>
                      <input matInput type="number" name="latitudeCreate" id="latitudeCreate"
                        [(ngModel)]="newDevice.latitude" required />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="longitudeCreate">{{longitude}}</mat-label>
                      <input matInput type="number" name="longitudeCreate" id="longitudeCreate"
                        [(ngModel)]="newDevice.longitude" required />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="locationCreate">{{location}}</mat-label>
                      <input matInput type="text" name="locationCreate" id="locationCreate"
                        [(ngModel)]="newDevice.location" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="timezoneCreate">{{assetTimezone}}</mat-label>
                      <mat-select id="timezoneCreate" name="timezoneCreate" [(ngModel)]="newDevice.assetTz">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let timezone of timezoneList" value="{{ timezone.codeDisplayTxt }}">
                          {{ timezone.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                   
                    <div class="form-group col-sm-6 col-md-6 col-lg-3 col-xl-3 pt-4 mt-2">
                      <mat-checkbox class="example-margin" [checked]="checkDeviceType() == true" disabled>  {{isVirtualAsset}}</mat-checkbox>
                    </div>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Asset Details">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="row mt-3">
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="ipAddresscreate">{{assetIpAddress}}</mat-label>
                      <input matInput type="text" #ipAddresscreate="ngModel" name="ipAddresscreate" id="ipAddresscreate"
                        [(ngModel)]="newDevice.assetIpaddr"
                        pattern="(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)" />
                      <div *ngIf="ipAddresscreate.invalid && ipAddresscreate.errors.pattern" class="alert alert-danger">
                       {{ipAddressNotValid}}
                      </div>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_nameCreateDetails">{{assetName}}</mat-label>
                      <input matInput type="text" name="dev_nameCreateDetails" id="dev_nameCreateDetails"
                        [(ngModel)]="newDevice.assetName" required />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_useridCreateDetails">{{assetUserId}}</mat-label>
                      <input matInput type="text" name="dev_useridCreateDetails" id="dev_useridCreateDetails"
                        [(ngModel)]="newDevice.assetUserid" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_passCreateDetails">{{assetPassword}}</mat-label>
                      <input matInput type="text" name="dev_passCreateDetails" id="dev_passCreateDetails"
                        [(ngModel)]="newDevice.assetPassword" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_accessCreateDetails">{{assetAccessPort}}</mat-label>
                      <input matInput type="number" name="dev_accessCreateDetails" id="dev_accessCreateDetails"
                        [(ngModel)]="newDevice.assetAccessPort" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_access_typeCreateDetails">{{assetAccessType}}</mat-label>
                      <input matInput type="text" name="dev_access_typeCreateDetails" id="dev_access_typeCreateDetails"
                        [(ngModel)]="newDevice.assetAccessType" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_aliasCreateDetails">{{assetAlias}}</mat-label>
                      <input matInput type="text" name="dev_aliasCreateDetails" id="dev_aliasCreateDetails"
                        [(ngModel)]="newDevice.assetAlias" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="pow_parent_devID">{{assetRecordVersion}}</mat-label>
                      <input matInput type="text" name="deviceRecordVerCreateDetails" [maxLength]="4"
                        id="deviceRecordVerCreateDetails" [(ngModel)]="newDevice.assetRecordVer" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="descriptionCreateDetails"> {{description}}</mat-label>
                      <input matInput type="text" name="descriptionCreateDetails" id="descriptionCreateDetails"
                        [(ngModel)]="newDevice.description" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="geoxCreateDetails">{{geoX}}</mat-label>
                      <input matInput type="number" name="sgeox" id="geoxCreateDetails" [(ngModel)]="newDevice.geoX" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="geoyCreateDetails">{{geoY}}</mat-label>
                      <input matInput type="number" name="geoyCreateDetails" id="geoyCreateDetails"
                        [(ngModel)]="newDevice.geoY" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="grp_seqCreateDetails">{{group}}</mat-label>
                      <mat-select id="grp_seqCreateDetails" name="grp_seqCreateDetails" [(ngModel)]="newDevice.groupSeq"
                        required>
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let group of deviceGroupsList" value="{{ group.groupSeq }}">
                          {{ group.groupName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="snmp_comm">{{installationDate}}</mat-label>
                      <div class="d-flex justify-content-end">

                        <input matInput type="text" name="installationDate" placeholder="MM/DD/YYYY hh:mm:ss"
                          class="caldate mr-2 inputWidth" id="installationDate" [(ngModel)]="newDevice.installationDate"
                          [owlDateTime]="dp4" [max]="maxFromAndTo()" />
                        <span [owlDateTimeTrigger]="dp4"><em class="fa fa-calendar cursor-pointer"></em></span>
                        <owl-date-time [hour12Timer]="true" #dp4></owl-date-time>
                      </div>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="snmp_port">{{registrationTime}}</mat-label>
                      <div class="d-flex justify-content-end">
                      
                        <input type="text" matInput name="registrationTsCreateDetails" placeholder="MM/DD/YYYY hh:mm:ss"
                          class="caldate mr-2 inputWidth" id="registrationTsCreateDetails"
                          [(ngModel)]="newDevice.registrationTs" [owlDateTime]="dp5" [max]="maxFromAndTo()" />
                        <span [owlDateTimeTrigger]="dp5"><em class="fa fa-calendar cursor-pointer"></em></span>
                        <owl-date-time [hour12Timer]="true" #dp5></owl-date-time>
                      </div>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="snmp_version ">{{provisioningTime}}</mat-label>
                      <div class="d-flex justify-content-end">
                       
                        <input matInput type="text" name="provisioningTsCreateDetails" placeholder="MM/DD/YYYY hh:mm:ss"
                          class="caldate mr-2 inputWidth" id="provisioningTsCreateDetails"
                          [(ngModel)]="newDevice.provisioningTs" [owlDateTime]="dp6" [max]="maxFromAndTo()" />
                        <span [owlDateTimeTrigger]="dp6"><em class="fa fa-calendar cursor-pointer"></em></span>
                        <owl-date-time [hour12Timer]="true" #dp6></owl-date-time>
                      </div>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="altitudeCreateDetails">{{altitude}}</mat-label>
                      <input matInput type="text" name="altitudeCreateDetails" id="altitudeCreateDetails"
                        [(ngModel)]="newDevice.altitude" />
                    </mat-form-field>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Measurements" *ngIf="checkDeviceType() == true"
                (selectTab)="sizeColumnsMeasurement($event)">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="row p-0 mt-3">
                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-4 pl-3 pr-2">
                      <p class="my-2" style="font-size: 15px">{{outputMeasurements}}</p>
                      <div class="" style="border: 1px solid deepskyblue">
                        <div class="row justify-content-between mx-0">
                          <div class="m-2 ml-3" style="padding-top: 2px">
                            <strong style="font-size: 14px; letter-spacing: 1px; color: #8c2121">{{filters}}
                            </strong>
                            <strong
                              *ngIf="createMeasurementNameTableFilter==null || createMeasurementNameTableFilter.length==0 "
                              style="color: #536c79">
                              {{noFilterSelected}}</strong>
                            <span class="filter-tabs" *ngFor="let filter of createMeasurementNameTableFilter">
                              {{ filter }}
                              <a (click)="clearFilterCreateMeasurementNameTable(filter)"
                                class="pl-2 cursor-pointer">&times;</a>
                            </span>
                          </div>
                          <div class="row d-flex mr-1 justify-content-end" style="flex-wrap: wrap">
                            <em class="fa fa-plus-circle mtt mr-2" style="font-size: 20px; cursor: pointer;"
                              title="Add Measurement" (click)="addMeasurement()"></em>
                            <em class="fa fa-trash-o mtt mr-3" title="Delete Measurement" *ngIf="list.length!=0"
                              (click)="deleteMeasurementModal.show()"> </em>
                          </div>
                        </div>
                        <ag-grid-angular id="measurementNameGrid" name="measurementNameGrid" #measurementNameGrid
                          style="width: 100%; height: 467px" class="ag-theme-balham"
                          (filterChanged)="filterModifiedCreateMeasurementNameTable()"
                          [rowClassRules]="rowClassRuleMeasurementNameTable"
                          (gridReady)="sizeToFitMeasurementTable()"
                          (cellContextMenu)="cellRightClickMeasurementName($event)"
                          (rowClicked)="selectMeasurement($event)" [gridOptions]="measurementNameGridOptions"
                          [rowData]="measurementNameAddRowData" [columnDefs]="measurementNameColumnDefs">
                        </ag-grid-angular>
                      </div>
                    </div>
                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-8 pl-3 pr-2">
                      <div class="row justify-content-between mx-0">
                        <p class="my-2" style="font-size: 15px">{{equation}}</p>
                      </div>
                      <form #addMeasForm="ngForm">
                        <div class="col-sm-12 col-xs-12 col-md-12 col-lg-12 row mx-0 p-0 mb-2"
                          style="border: 1px solid deepskyblue">
                          <div class="row mx-0 col-12 p-2">
                            <div class="form-inline col-sm-12 col-md-8 col-lg-7 col-xl-7 p-2">
                              <mat-form-field class="example-full-width" style="width: 220px;">
                                <mat-label class="pr-1">{{outputMeasurementName}}</mat-label>
                                <input matInput type="text" name="measurementNameCreate" id="measurementNameCreate"
                                  [(ngModel)]="measurement.assetMeasurementName" required />
                              </mat-form-field>
                            </div>
                            <div class="form-inline col-sm-12 col-md-4 col-lg-5 col-xl-5 p-0">
                              <mat-form-field class="example-full-width">
                                <mat-label class="pr-1">{{UOM1}}</mat-label>
                                <mat-select id="uomCreate" name="uomCreate" [(ngModel)]="measurement.uom" required>
                                  <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                                  <mat-option *ngFor="let codetype of codeTypeList" [value]="codetype.codeDisplayTxt">{{ codetype.codeDisplayTxt }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="col-sm-8 col-md-12 col-lg-12 col-xl-12 p-0 mb-2">
                            <div class="col-12 p-0 row mx-0">
                              <strong class="pl-2 mb-2">{{selectInputMeasurement}}</strong>
                            </div>
                            <div class="row justify-content-between mx-0">
                              <div class="mb-2 ml-3" style="padding-top: 2px">
                                <strong style="font-size: 14px; letter-spacing: 1px; color: #8c2121">{{filters}}
                                </strong>
                                <strong *ngIf="createMeasurementInputTableFilter==null || createMeasurementInputTableFilter.length==0" style="color: #536c79">
                                  {{noFilterSelected}}</strong>
                                <span class="filter-tabs" *ngFor="let filter of createMeasurementInputTableFilter">
                                  {{ filter }}
                                  <a (click)="clearFilterCreateMeasurementInputTable(filter)"
                                    class="pl-2 cursor-pointer">&times;</a>
                                </span>
                              </div>
                            </div>
                            <ag-grid-angular id="measurementInputGrid" name="measurementInputGrid" #measurementInputGrid
                              style="width: 100%; height: 160px" class="ag-theme-balham"
                              [rowClassRules]="rowClassRuleMeasurementInputTable"
                              (rowDoubleClicked)="rowDoubleClickMeasurementInput($event)"
                              (filterChanged)="filterModifiedCreateMeasurementInputTable()"
                              [gridOptions]="measurementInputGridOptions" [rowData]="measurementInputRowData"
                              [columnDefs]="measurementInputColumnDefs"></ag-grid-angular>
                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                              <div class="row">
                                <div class="form-inline col-7 p-2">
                                  <div class="row mx-0 equbtn" style="margin-top: 31px;">
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="1"
                                      (click)="setValue(1)">
                                      +
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="2"
                                      (click)="setValue(2)">
                                      -
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="3"
                                      (click)="setValue(3)">
                                      /
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.8rem" [value]="4" (click)="setValue(4)">
                                      %
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.95rem" [value]="5" (click)="setValue(5)">
                                      *
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="6"
                                      (click)="setValue(6)">
                                      =
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="7"
                                      (click)="setValue(7)">
                                      &#60;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="8"
                                      (click)="setValue(8)">
                                      >
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.85rem" [value]="9" (click)="setValue(9)">
                                      &
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.7rem" [value]="10" (click)="setValue(10)">
                                      &#60;&#61;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.65rem" [value]="11" (click)="setValue(11)">
                                      >=
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.85rem" [value]="12" (click)="setValue(12)">
                                      !=
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.97rem" [value]="13" (click)="setValue(13)">
                                      |
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3  oper"
                                      style="padding: 0.7rem" [value]="14" (click)="setValue(14)">
                                      ==
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.99rem" [value]="17" (click)="setValue(17)">
                                      &#40;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.99rem" [value]="18" (click)="setValue(18)">
                                      &#41;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.99rem" [value]="19" (click)="setValue(19)">
                                      &#91;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper"
                                      style="padding: 0.99rem" [value]="20" (click)="setValue(20)">
                                      &#93;
                                    </button>
                                  </div>
                                </div>
                                <div class="form-inline col-5 p-2">
                                  <label class="my-1">{{equation}}</label>
                                  <textarea cols="100" rows="4" name="calculationEquationCreateDetails"
                                    id="calculationEquationCreateDetails" (keyup)="toggleValidation()"
                                    [(ngModel)]="measurement.calculationEquation"></textarea>
                                </div>
                              </div>
                              <div class="text-center">
                                <button type="button" class="btn btn-success btn-sm mr-2"
                                  [disabled]="!isValidExpression || addMeasForm.invalid || measurement.calculationEquation == null || measurement.calculationEquation == ''"
                                  (click)="saveMeasurementAdd()">
                                  <em class="fa fa-save mr-1"></em>{{saveMeasurement1}}
                                </button>
                                <button type="button" class="btn btn-primary btn-sm mr-2" [disabled]="
                                    measurement.calculationEquation == null || measurement.calculationEquation == ''
                                  " (click)="validateExpressionAdd()">
                                  <em class="fa fa-check mr-1"></em>{{validate}}
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Measurements" *ngIf="checkDeviceType() == false"
                (selectTab)="sizeColumnsMeasurementNew($event)">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="row mt-2">
                    <mat-form-field class="example-full-width col-4">
                      <mat-label for="sysinterface1">{{systemInterface1}}</mat-label>
                      <mat-select id="sysinterface1" name="sysinterface1"
                        [(ngModel)]="newDevice.systemInterface">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                       <mat-option [value]="s.codeDisplayTxt" *ngFor="let s of systemInterface" >
                        {{  s.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>

                    <mat-form-field class="example-full-width col-4">
                      <mat-label for="protocol1">{{protocol1}}</mat-label>
                      <mat-select id="protocol1" name="protocol1" [(ngModel)]="newDevice.protocol">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option [value]="p.codeDisplayTxt" *ngFor="let p of protocol" >
                          {{  p.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>

                    <mat-form-field class="example-full-width col-4">
                      <mat-label for="adapter1">{{adapter1}}</mat-label>
                      <mat-select id="adapter1" name="adapter1" [(ngModel)]="newDevice.adapter">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option [value]="a.codeDisplayTxt" *ngFor="let a of adapter" >
                          {{  a.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="row mx-0">
                    <div class="row justify-content-between mx-0 p-0 col-12">
                      <div class="ml-3 m-2">
                        <strong style="font-size: 16px; letter-spacing: 1px; color: #8c2121">{{filters}}</strong>
                        <strong *ngIf="deviceMeasurementNewFilter==null || deviceMeasurementNewFilter.length==0"
                          style="color: #536c79">
                          {{noFilterSelected}}</strong>
                        <span class="filter-tabs" *ngFor="let filter of deviceMeasurementNewFilter">
                          {{ filter }}
                          <a (click)="clearFilterDeviceMeasurementNewTable(filter)"
                            class="pl-2 cursor-pointer">&times;</a>
                        </span>
                      </div>
                    </div>
                    <ag-grid-angular id="deviceMeasurementNewGrid" name="deviceMeasurementNewGrid"
                      #deviceMeasurementNewGrid style="width: 100%; height: calc(60vh - 95px); min-height: 100px"
                      class="ag-theme-balham" (filterChanged)="filterModifiedDeviceMeasurementNewTable()"
                      [rowClassRules]="rowClassRuleDeviceMeasurementNewTable"
                      [gridOptions]="deviceMeasurementNewGridOptions" [rowData]="deviceMeasurementNewRowData"
                      [columnDefs]="deviceMeasurementNewColumnDefs"></ag-grid-angular>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Attribute">
                <div class="container-fluid" style="border-top: 1px solid #e2dede;">
                  <div class="form-row" id="attList">
                    <div class="form-row mt-3 ml-0" *ngIf="createAttributesList.length > 0">
                      <mat-form-field class="example-full-width col-12 col-sm-6 col-md-6 col-lg-3 col-xl-3" *ngFor="let item of createAttributesList">
                        <mat-label>{{ item.name }}</mat-label>
                        <input matInput type="text" name="{{ item.name }}" id="{{ item.name }}" [(ngModel)]="item.value"  />
                      </mat-form-field>
                    </div>
                    <div class="form-row ml-0" *ngIf="!(createAttributesList.length > 0)">
                      <div class="form-group col-12 mt-4 mb-0">
                        <h6 class="ml-auto">No Attribute Selected</h6>
                      </div>
                    </div>
                    <div class="form-row ml-0">
                      <div class="form-group col-12 mt-4 mb-0">
                        <h6></h6>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Picture">
                <div class="container-fluid" style="border-top: 1px solid #e2dede;">
                  <div class="form-row mt-3 float-right">
                    <button type="button" class="btn btn-primary btn-sm mr-4 mt-1" (click)="openUplaod(true);resetupload(uploadPictureForm);">
                      <em class="fa fa-upload mr-1"></em>{{upload}}
                    </button>
                  </div>
                  <div class="form-row ml-0 text-center" style="padding: 43px 1px">
                    <div class="form-group col-12 mb-0"  *ngIf="(newDevice.assetPicture?.length==0)">
                      <h6>{{noPictureSelected}}</h6>
                    </div>
                  </div>
                  <div class="row col-12 py-2" style="overflow: auto; flex-wrap: nowrap"
                    *ngIf="newDevice.assetPicture?.length > 0">
                    <div *ngFor="let picture of newDevice.assetPicture" class="text-center mx-3 imageHover"
                      style="width: 160px; position: relative">
                      <img style="width: 160px; height: 160px" alt=""
                        [src]="'data:image/png;base64,' + picture.pictureFile" />
                      <div (click)="showFullScreen(picture)" class="deleteButtonPicture" style="
                          width: 160px;
                          height: 160px;
                          top: 0px;
                          left: 0px;
                          position: absolute;
                          background: #ffffff40;
                        "></div>
                      <span class="deleteButtonPicture" (click)="removeNewPicture(picture.pictureTitle)"
                        style="top: -3px; right: 5px; position: absolute; font-size: 20px; font-weight: bold">&times;</span>
                      <span>{{ picture.pictureTitle }}</span>
                    </div>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Notes" (selectTab)="sizeColumnsDeviceNotes($event)">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="">
                    <div class="row justify-content-between mx-0">
                      <div class="m-2 ml-3" style="padding-top: 2px;">
                        <strong style="font-size: 16px; letter-spacing: 1px; color: #8c2121">{{filters}}</strong>
                        <strong *ngIf="deviceNotesTableFilter==null || deviceNotesTableFilter.length==0"
                          style="color: #536c79">{{noFilterSelected}}</strong>
                        <span class="filter-tabs" *ngFor="let filter of deviceNotesTableFilter">
                          {{ filter }}
                          <a (click)="clearFilterDeviceNotes(filter)" class="pl-2 cursor-pointer">&times;</a>
                        </span>
                      </div>
                      <div class="d-flex justify-content-end" style="flex-wrap: wrap;">
                        <em class="fa fa-plus-circle mtt mr-3" title="Add Notes"
                          (click)="openAddNote(true, true, false, null)"> </em>
                      </div>
                    </div>
                    <ag-grid-angular id="deviceNotes" name="deviceNotes" #deviceNotes
                      style="width: 100%; height: 200px; font-size: 14.2px" class="ag-theme-balham"
                      (filterChanged)="filterModifieddeviceNotes()"
                      (cellDoubleClicked)="openAddNote(true, false, false, $event)" [columnDefs]="columnDefsdeviceNotes"
                      [rowClassRules]="rowClassRulesdeviceNotes" [gridOptions]="gridOptionsdeviceNotes"
                      [rowData]="rowDataDeviceNotes" (cellContextMenu)="cellRightClickAddNote($event)">
                    </ag-grid-angular>
                    <context-menu #addNoteContextmenu>
                      <ng-template contextMenuItem (execute)="deleteNote(true, $event)">{{delete}}</ng-template>
                    </context-menu>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </form>

     

          <div class="text-center mt-2">
            <button type="button" class="btn btn-sm btn-secondary mr-2" (click)="closeModal()">
              <em class="fa fa-times mr-1"></em>{{close}}
            </button>
            <button type="button" class="btn btn-sm btn-primary mr-2"   *ngIf="!titleForCreateAsset" (click)="resetCreateAsset(form);">
              <em class="fa fa-refresh mr-1"></em>{{reset1}}
            </button>
            <button type="button" class="btn btn-sm btn-primary mr-2" *ngIf="titleForCreateAsset" (click)=" resetChildAsset();">
              <em class="fa fa-refresh mr-1"></em>{{reset1}}
            </button>
            <button type="button"class="btn btn-sm btn-success mr-2" (click)="createDevice(true, false)"
              [disabled]="form.invalid">
              <em class="fa fa-save mr-1"></em>{{save}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Edit Modal -->
<div bsModal #editModal="bs-modal" [config]="{ ignoreBackdropClick: true, keyboard: false }" class="modal fade fadeIn"
  tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name21">
  <div class="modal-dialog modal-2x">
    <div class="modal-content">
      <div class="modal-header bg-purple text-white pt-1 pb-1">
        <h6 class="ml-auto mb-0">{{editAsset}}</h6>
        <button type="button" class="close pull-right text-white" aria-label="Close" (click)="cancelDevice()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid p-0">
          <form #editForm="ngForm">
            <mat-tab-group #editTabs id="editTabs" [(selectedIndex)]="selectedEditTabIndex"
              (selectedTabChange)="onMainTabChanged($event);">
              <mat-tab label="Asset Information">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="row mt-3">
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="ven_seqEdit">Vendor</mat-label>
                      <mat-select id="ven_seqEdit" name="ven_seqEdit"
                        (selectionChange)="getDeviceTypesByVendor(selectedDevice.vendorSeq)"
                        [(ngModel)]="selectedDevice.vendorSeq" required disabled>
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let vendor of vendorsList" [value]="vendor.vendorSeq">
                          {{ vendor.vendorName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="inputStateEdit">{{assetType}}</mat-label>
                      <mat-select id="inputStateEdit" name="inputStateEdit" (selectionChange)="getAttributes()"
                        [(ngModel)]="selectedDevice.assetTypeSeq" required disabled>
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let type of deviceTypeList" [value]="type.assetTypeSeq">
                          {{ type.assetTypeName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="devidEdit">{{assetId}}</mat-label>
                      <input matInput type="text" name="moid" id="devidEdit" disabled [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.assetId" [readonly]="true" required />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="p_devid">{{assetClass}}</mat-label>
                      <mat-select id="p_devidEdit1" name="p_devidEdit1"
                        (selectionChange)='onAssetClassSelected(selectedDevice.assetClass)'
                        [(ngModel)]="selectedDevice.assetClass" required disabled>
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let device of assetClass1" [value]="device.codeDisplayTxt"
                          [hidden]="isSelected(device.assetClass)">
                          {{ device.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="p_devidEdit3">{{parentAssetId}}</mat-label>
                      <mat-select id="p_devidEdit3" name="p_devidEdit3" [disabled]="isEdit"
                        [(ngModel)]="selectedDevice.parentAssetid">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let device of deviceListByClass" [value]="device.assetId"
                          [hidden]="isSelected(device.assetId)">
                          {{ device.assetId }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="latitudeEdit">{{latitude}}</mat-label>
                      <input matInput type="number" name="latitudeEdit" id="latitudeEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.latitude" required />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="longitudeEdit">{{longitude}}</mat-label>
                      <input type="number" matInput name="longitudeEdit" id="longitudeEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.longitude" required />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="locationEdit">{{location}}</mat-label>
                      <input matInput type="text" name="locationEdit" id="locationEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.location" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="timezoneEdit">{{assetTimezone}}</mat-label>
                      <mat-select id="timezoneEdit" name="timezoneEdit" [disabled]="isEdit"
                        [(ngModel)]="selectedDevice.assetTz">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let timezone of timezoneList" [value]="timezone.codeDisplayTxt">
                          {{ timezone.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  
                    <div class="form-group col-sm-6 col-md-6 col-lg-3 col-xl-3 pt-4 mt-2">
                      <mat-checkbox class="example-margin" disabled [checked]="checkDeviceTypeEdit() == true"> Is
                        Virtual Asset</mat-checkbox>
                    </div>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Asset Details">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="row mt-3">
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="ipaddressEdit">{{assetIpAddress}}</mat-label>
                      <input matInput type="text" #ipaddressEdit="ngModel" name="ipaddressEdit" id="ipaddressEdit"
                        [readonly]="isEdit" [(ngModel)]="selectedDevice.assetIpaddr"
                        pattern="(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)" />
                      <div *ngIf="ipaddressEdit.invalid && ipaddressEdit.errors.pattern" class="alert alert-danger">
                        {{ipAddressNotValid}}
                      </div>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_nameEdit">{{assetName}}</mat-label>
                      <input matInput type="text" name="dev_nameEdit" id="dev_nameEdit"
                        [(ngModel)]="selectedDevice.assetName" [readonly]="isEdit" disabled required />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_useridEdit">{{assetUserId}}</mat-label>
                      <input matInput type="text" name="dev_useridEdit" id="dev_useridEdit"
                        [(ngModel)]="selectedDevice.assetUserid" disabled [readonly]="isEdit" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_passEdit">{{assetPassword}}</mat-label>
                      <input matInput type="text" name="dev_passEdit" id="dev_passEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.assetPassword" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_accessEdit">{{assetAccessPort}}</mat-label>
                      <input matInput type="number" name="dev_accessEdit" id="dev_accessEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.assetAccessPort" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label matInput for="dev_access_typeEdit">{{assetAccessType}}</mat-label>
                      <input matInput type="text" name="dev_access_typeEdit" id="dev_access_typeEdit"
                        [readonly]="isEdit" [(ngModel)]="selectedDevice.assetAccessType" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="dev_aliasEdit">{{assetAlias}}</mat-label>
                      <input matInput type="text" name="dev_aliasEdit" id="dev_aliasEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.assetAlias" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="deviceRecordVerEdit">{{assetRecordVersion}}</mat-label>
                      <input matInput type="text" name="deviceRecordVerEdit" [maxLength]="4" id="deviceRecordVerEdit"
                        [readonly]="isEdit" [(ngModel)]="selectedDevice.assetRecordVer" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="descriptionEdit"> {{description}}</mat-label>
                      <input matInput type="text" name="descriptionEdit" id="descriptionEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.description" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="geoxEdit">{{geoX}}</mat-label>
                      <input matInput type="number" name="sgeox" id="geoxEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.geoX" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="geoyEdit">{{geoY}}</mat-label>
                      <input matInput type="number" name="geoyEdit" id="geoyEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.geoY" />
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="grp_seqEdit">{{group}}</mat-label>
                      <mat-select id="grp_seqEdit" name="grp_seqEdit" [disabled]="isEdit"
                        [(ngModel)]="selectedDevice.groupSeq" required>
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option *ngFor="let group of deviceGroupsList" [value]="group.groupSeq">
                          {{ group.groupName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="installationDateEdit">{{installationDate}}</mat-label>
                      <div class="d-flex justify-content-end">
                        <input matInput type="text" name="installationDateEdit" placeholder="MM/DD/YYYY hh:mm:ss"
                          class="caldate mr-2 inputWidth" id="installationDateEdit"
                          [(ngModel)]="selectedDevice.installationDate" [owlDateTime]="dp7" [max]="maxFromAndTo()"
                          />
                        <span [owlDateTimeTrigger]="dp7"><em class="fa fa-calendar cursor-pointer"></em></span>
                        <owl-date-time [hour12Timer]="true" #dp7></owl-date-time>
                      </div>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="registrationTsEdit">{{registrationTime}}</mat-label>
                      <div class="d-flex justify-content-end">
                        <input matInput type="text" name="registrationTsEdit" placeholder="MM/DD/YYYY hh:mm:ss"
                          class="caldate mr-2 inputWidth" id="registrationTsEdit"
                          [(ngModel)]="selectedDevice.registrationTs" [owlDateTime]="dp8" [max]="maxFromAndTo()"
                          />
                        <span [owlDateTimeTrigger]="dp8"><em class="fa fa-calendar cursor-pointer"></em></span>
                        <owl-date-time [hour12Timer]="true" #dp8></owl-date-time>
                      </div>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="provisioningTsEdit">{{provisioningTime}}</mat-label>
                      <div class="d-flex justify-content-end">
                        <input matInput type="text" name="provisioningTsEdit" placeholder="MM/DD/YYYY hh:mm:ss"
                          class="caldate mr-2 inputWidth" id="provisioningTsEdit"
                          [(ngModel)]="selectedDevice.provisioningTs" [owlDateTime]="dp9" [max]="maxFromAndTo()"
                       />
                        <span [owlDateTimeTrigger]="dp9"><em class="fa fa-calendar cursor-pointer"></em></span>
                        <owl-date-time [hour12Timer]="true" #dp9></owl-date-time>
                      </div>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-sm-6 col-md-6 col-lg-3 col-xl-3">
                      <mat-label for="altitudeEdit">{{altitude}}</mat-label>
                      <input matInput type="text" name="altitudeEdit" id="altitudeEdit" [readonly]="isEdit"
                        [(ngModel)]="selectedDevice.altitude" />
                    </mat-form-field>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Measurements" *ngIf="checkDeviceTypeEdit() == true"
                (selectTab)="sizeColumnsMeasurementEdit($event)">
                <div class="container-fluid" style="border-top: 1px solid #e2dede;">
                  <div class="row p-0 mt-3">
                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-4 px-3">
                      <p class="my-2" style="font-size: 15px">{{outputMeasurements}}</p>
                      <div class="" style="border: 1px solid deepskyblue">
                        <div class="row justify-content-between mx-0">
                          <div class="m-2 ml-3" style="padding-top: 2px">
                            <strong style="font-size: 14px; letter-spacing: 1px; color: #8c2121">{{filters}}</strong>
                            <strong *ngIf="measurementNameTableFilter==null || measurementNameTableFilter.length==0 "
                              style="color: #536c79">No Filter
                              Selected</strong>
                            <span class="filter-tabs" *ngFor="let filter of measurementNameTableFilter">
                              {{ filter }}
                              <a (click)="clearFilterMeasurementNameTable(filter)"
                                class="pl-2 cursor-pointer">&times;</a>
                            </span>
                          </div>
                          <div class="row d-flex mr-1 justify-content-end" style="flex-wrap: wrap">
                            <em class="fa fa-plus-circle mtt mr-2" style="font-size: 20px; cursor: pointer;"
                              title="Edit Measurement" (click)="addMeasurement()"></em>
                            <em class="fa fa-trash-o mtt mr-3" title="Delete Measurement"
                              *ngIf="measurementNameRowData.length!=0" (click)="deleteMeasurementEditModal.show()">
                            </em>
                          </div>
                        </div>
                        <ag-grid-angular id="measurementNameGrid" name="measurementNameGrid" #measurementNameGrid
                          style="width: 100%; height: 450px" class="ag-theme-balham"
                          (filterChanged)="filterModifiedMeasurementNameTable()"
                          (sortChanged)="measurementNameGridSortChanged($event)"
                          [rowClassRules]="rowClassRuleMeasurementNameTable" (rowClicked)="selectMeasurement($event)"
                          [gridOptions]="measurementNameGridOptions" [rowData]="measurementNameRowData"
                          [columnDefs]="measurementNameColumnDefs" (gridReady)="sizeToFitmeasurementGrid()">
                        </ag-grid-angular>


                      </div>
                    </div>
                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-8 px-3">
                      <form #editMeasForm="ngForm">
                        <div class="row justify-content-between mx-0">
                          <p class="my-2" style="font-size: 15px">{{equation}}</p>

                        </div>
                        <div class="col-sm-12 col-xs-12 col-md-12 col-lg-12 row mx-0 p-0 mb-2"
                          style="border: 1px solid deepskyblue">
                          <div class="row mx-0 col-12 p-2">
                            <div class="form-inline col-sm-12 col-md-8 col-lg-7 col-xl-7 p-0">
                              <mat-form-field class="example-full-width" style="width: 220px;">
                                <mat-label class="pr-1" >{{outputMeasurementName}}</mat-label>
                                <input matInput type="text" name="measurementName" id="measurementName"
                                  [(ngModel)]="measurement.assetMeasurementName" required />
                              </mat-form-field>
                            </div>
                            <div class="form-inline col-sm-12 col-md-4 col-lg-5 col-xl-5 p-0">
                              <mat-form-field class="example-full-width">
                                <mat-label class="pr-1">{{UOM1}}</mat-label>
                                <mat-select id="uomEdit" name="uomEdit" [(ngModel)]="measurement.uom" required>
                                  <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                                  <mat-option  *ngFor="let codetype of codeTypeList" [value]="codetype.codeDisplayTxt">{{ codetype.codeDisplayTxt }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="col-sm-8 col-md-12 col-lg-12 col-xl-12 p-0 mb-2">
                            <div class="col-12 p-0 row mx-0">
                              <strong class="pl-2 mb-2">{{selectInputMeasurement}}</strong>
                            </div>
                            <div class="row justify-content-between mx-0">
                              <div class="mb-2 ml-3" style="padding-top: 2px">
                                <strong style="font-size: 14px; letter-spacing: 1px; color: #8c2121">{{filters}}
                                </strong>
                                <strong *ngIf="measurementInputEditTableFilter==null || measurementInputEditTableFilter.length==0" style="color: #536c79">
                                  {{noFilterSelected}}</strong>
                                <span class="filter-tabs" *ngFor="let filter of measurementInputEditTableFilter">
                                  {{ filter }}
                                  <a (click)="clearFilterMeasurementInputEditTable(filter)"
                                    class="pl-2 cursor-pointer">&times;</a>
                                </span>
                              </div>
                            </div>
                            <ag-grid-angular id="measurementInputEditGrid" name="measurementInputEditGrid"
                              #measurementInputEditGrid style="width: 100%; height: 160px" class="ag-theme-balham"
                              [rowClassRules]="rowClassRuleMeasurementInputTable"
                              [gridOptions]="measurementInputGridOptions"
                              (filterChanged)="filterModifiedmeasurementInputEditTable()"
                              (sortChanged)="measurementInputEditGridSortChanged($event)"
                              (rowDoubleClicked)="rowDoubleClickMeasurementInput($event)"
                              [rowData]="measurementInputRowData" (gridReady)="sizeToFitMeasurementEdit()"
                              [columnDefs]="measurementInputColumnDefs">
                            </ag-grid-angular>
                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                              <div class="row">
                                <div class="form-inline col-7 p-2">
                                  <div class="row mx-0 equbtn" style="margin-top: 31px;">
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="1"
                                      (click)="setValue(1)">
                                      +
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="2"
                                      (click)="setValue(2)">
                                      -
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="3"
                                      (click)="setValue(3)">
                                      /
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.8rem" [value]="4" (click)="setValue(4)">
                                      %
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.95rem" [value]="5" (click)="setValue(5)">
                                      *
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="6"
                                      (click)="setValue(6)">
                                      =
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="7"
                                      (click)="setValue(7)">
                                      &#60;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 p-3 oper" [value]="8"
                                      (click)="setValue(8)">
                                      >
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.85rem" [value]="9" (click)="setValue(9)">
                                      &
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.7rem" [value]="10" (click)="setValue(10)">
                                      &#60;&#61;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.65rem" [value]="11" (click)="setValue(11)">
                                      >=
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.85rem" [value]="12" (click)="setValue(12)">
                                      !=
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.97rem" [value]="13" (click)="setValue(13)">
                                      |
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.7rem" [value]="14" (click)="setValue(14)">
                                      ==
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.99rem" [value]="17" (click)="setValue(17)">
                                      &#40;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.99rem" [value]="18" (click)="setValue(18)">
                                      &#41;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.99rem" [value]="19" (click)="setValue(19)">
                                      &#91;
                                    </button>
                                    <button type="button" class="btn btn-sm btn-primary m-1 oper"
                                      style="padding: 0.99rem" [value]="20" (click)="setValue(20)">
                                      &#93;
                                    </button>
                                  </div>
                                </div>
                                <div class="form-inline col-5 p-2">
                                  <label class="my-1">{{equation}}</label>
                                  <textarea cols="100" rows="4" name="equationExpressionInput1"
                                    id="equationExpressionInput1" (keyup)="toggleValidation()"
                                    [(ngModel)]="measurement.calculationEquation"></textarea>
                                </div>
                              </div>
                              <div class="text-center">
                                <button type="button" class="btn btn-success btn-sm mr-2"
                                  [disabled]="!isValidExpression || editMeasForm.invalid ||  measurement.calculationEquation == null || measurement.calculationEquation == ''"
                                  (click)="saveMeasurement()">
                                  <em class="fa fa-save mr-1"></em>{{saveMeasurement1}}
                                </button>
                                <button type="button" class="btn btn-primary btn-sm mr-2"
                                  (click)="validateExpressionAdd()" [disabled]="
                                    measurement.calculationEquation == null || measurement.calculationEquation == ''
                                  ">
                                  <em class="fa fa-check mr-1"></em>{{validate}}
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Measurements" *ngIf="checkDeviceTypeEdit() == false"
                (selectTab)="sizeColumnsMeasurementNewEdit($event)">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="row mt-2">
                    <mat-form-field class="example-full-width col-4">
                      <mat-label for="sysinterface2">{{systemInterface1}}</mat-label>
                      <mat-select id="sysinterface2" name="sysinterface2"
                        [(ngModel)]="selectedDevice.systemInterface">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option [value]="s.codeDisplayTxt" *ngFor="let s of systemInterface" >
                          {{  s.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-4">
                      <mat-label for="protocol2">{{protocol1}}</mat-label>
                      <mat-select id="protocol2" name="protocol2" [(ngModel)]="selectedDevice.protocol">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                         <mat-option [value]="p.codeDisplayTxt" *ngFor="let p of protocol" >
                          {{  p.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field class="example-full-width col-4">
                      <mat-label for="adapter2">{{adapter1}}</mat-label>
                      <mat-select id="adapter2" name="adapter2" [(ngModel)]="selectedDevice.adapter">
                        <mat-option value="null" [disabled]="true">{{choose}}</mat-option>
                        <mat-option [value]="a.codeDisplayTxt" *ngFor="let a of adapter" >
                          {{  a.codeDisplayTxt }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="row mx-0">
                    <div class="row justify-content-between mx-0 p-0 col-12">
                      <div class="ml-3 m-2">
                        <strong style="font-size: 16px; letter-spacing: 1px; color: #8c2121">{{filters}}</strong>
                        <strong
                          *ngIf="deviceMeasurementNewEditFilter==null || deviceMeasurementNewEditFilter.length==0 "
                          style="color: #536c79">
                          {{noFilterSelected}}</strong>
                        <span class="filter-tabs" *ngFor="let filter of deviceMeasurementNewEditFilter">
                          {{ filter }}
                          <a (click)="clearFilterDeviceMeasurementNewEditTable(filter)"
                            class="pl-2 cursor-pointer">&times;</a>
                        </span>
                      </div>
                      <div class="d-flex justify-content-end" style="flex-wrap: wrap">

                      </div>
                    </div>
                    <ag-grid-angular id="deviceMeasurementNewEditGrid" name="deviceMeasurementNewEditGrid"
                      #deviceMeasurementNewEditGrid style="width: 100%; height: calc(60vh - 95px); min-height: 100px"
                      class="ag-theme-balham" (filterChanged)="filterModifiedDeviceMeasurementNewEditTable()"
                      (sortChanged)="deviceMeasurementNewEditGridSortChanged($event)"
                      [rowClassRules]="rowClassRuleDeviceMeasurementNewEditTable"
                      [gridOptions]="deviceMeasurementNewEditGridOptions" [rowData]="deviceMeasurementNewEditRowData"
                      [columnDefs]="deviceMeasurementNewEditColumnDefs">
                    </ag-grid-angular>
                  </div>
                </div>
              </mat-tab>

              
              <mat-tab label="Attribute">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="form-row">
                    <div class="form-row mt-3 ml-0" style="width: 100%" *ngIf="attributesList.length > 0">
                      <mat-form-field class="example-full-width col-12 col-sm-6 col-md-6 col-lg-3 col-xl-3" *ngFor="let item of attributesList">
                        <mat-label>{{ item.name }}</mat-label>
                        <input matInput type="text" name="{{ item.name }}" id="{{ item.name }}" [readonly]="isEdit" [(ngModel)]="item.value"  />
                      </mat-form-field>
                    </div>
                    <div class="form-row ml-0" style="width: 100%" *ngIf="!(attributesList.length > 0)">
                      <div class="form-group col-12 mt-4 mb-0">
                        <h6>No Attribute Selected</h6>
                      </div>
                    </div>
                    <div class="form-row ml-0" style="width: 100%">
                      <div class="form-group col-12 mt-4 mb-0">
                        <h6></h6>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Picture">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="form-row mt-3 float-right">
                    <button type="button" class="btn btn-primary btn-sm mr-4 mt-1" (click)="openUplaod(false);resetupload(uploadPictureForm);">
                      <em class="fa fa-upload mr-1"></em>{{upload}}
                    </button>
                  </div>
                  <div class="form-row ml-0 text-center" style="width: 100%; padding: 43px 1px">

                    <div class="form-group col-12 mb-0" *ngIf="(selectedDevice.assetPicture?.length == 0)">
                      <h6>{{noPictureSelected}}</h6>
                    </div>
                  </div>
                  <div class="row col-12 py-2" style="overflow: auto; flex-wrap: nowrap"
                    *ngIf="selectedDevice.assetPicture != null">

                    <div *ngFor="let picture of selectedDevice.assetPicture" class="text-center mx-3 imageHover"
                      style="width: 160px; position: relative">
                      <img style="width: 160px; height: 160px" alt=""
                        [src]="'data:image/png;base64,' + picture.pictureFile" />
                      <div (click)="showFullScreen(picture)" class="deleteButtonPicture" style="
                          width: 160px;
                          height: 160px;
                          top: 0px;
                          left: 0px;
                          position: absolute;
                          background: #ffffff40;
                        "></div>
                      <span class="deleteButtonPicture" (click)="removePictureEdit(picture.pictureTitle)"
                        style="top: -3px; right: 5px; position: absolute; font-size: 20px; font-weight: bold;">&times;</span>
                      <span>{{ picture.pictureTitle }}</span>
                    </div>
                  </div>
                </div>
              </mat-tab>

              <mat-tab label="Notes" (selectTab)="sizeColumnsDeviceNotesEdit($event)">
                <div class="container-fluid" style="border-top: 1px solid #e2dede; width: 100%">
                  <div class="">
                    <div class="row justify-content-between mx-0">
                      <div class="m-2 ml-3" style="padding-top: 2px;">
                        <strong style="font-size: 16px; letter-spacing: 1px; color: #8c2121">{{filters}}</strong>
                        <strong *ngIf="deviceNotesEditTableFilter==null || deviceNotesEditTableFilter.length==0 "
                          style="color: #536c79">{{noFilterSelected}}</strong>
                        <span class="filter-tabs" *ngFor="let filter of deviceNotesEditTableFilter">
                          {{ filter }}
                          <a (click)="clearFilterDeviceNotesEdit(filter)" class="pl-2 cursor-pointer">&times;</a>
                        </span>
                      </div>
                      <div class="d-flex justify-content-end" style="flex-wrap: wrap;">
                        <em class="fa fa-plus-circle mtt mr-3" title="Add Notes"
                          (click)="openAddNote(false, true, false, null)"> </em>
                      </div>
                    </div>
                    <ag-grid-angular id="deviceNotesEdit" #deviceNotesEdit name="deviceNotesEdit"
                      style="width: 100%; height: 200px; font-size: 14.2px" class="ag-theme-balham"
                      (filterChanged)="filterModifieddeviceNotesEdit()"
                      (sortChanged)="deviceNotesEditSortChanged($event)"
                      (cellDoubleClicked)="openAddNote(false, false, false, $event)"
                      [columnDefs]="columnDefsdeviceNotesEdit" [rowClassRules]="rowClassRulesdeviceNotesEdit"
                      [gridOptions]="gridOptionsdeviceNotesEdit" [rowData]="rowDataDeviceNotesEdit"
                      (cellContextMenu)="cellRightClickEditNote($event)">
                    </ag-grid-angular>
                
                    <context-menu #editNoteContextmenu>
                      <ng-template contextMenuItem (execute)="deleteNote(false, $event)">{{delete}}</ng-template>
                    </context-menu>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </form>
          <div class="col-12 text-center mt-3">

            <button class="btn btn-sm btn-secondary mr-2"(click)="cancelDevice()" >
              <em class="fa fa-times mr-1"></em>Cancel
            </button>
           
            <button class="btn btn-sm btn-primary mr-2"   (click)="resetChanges()" translate>
              <em class="fa fa-refresh mr-1"></em>Reset
            </button>
             
            <button class="btn btn-sm btn-success mr-2"  (click)="updateDevice(false, false)"
            [disabled]="editForm.invalid"translate>
            <em class="fa fa-save mr-1"></em>Save
          </button>


          
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Delete Modal -->
<div bsModal #deleteModal="bs-modal" [config]="{ ignoreBackdropClick: true, keyboard: false }" class="modal fade"
  tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name2">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h6 id="dialog-sizes-name2" class="modal-title pull-left">{{deleteDevice1}}</h6>
        <button type="button" class="close pull-right text-white" aria-label="Close" (click)="deleteModal.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <p>Do you want to confirm?</p>

        <button type="button" class="btn btn-success mr-4"  (click)="deleteDevice()" translate>
          Yes
        </button>
        <button type="button" class="btn btn-secondary"  (click)="deleteModal.hide()" translate>
          No
        </button>
       
      </div>
    </div>
  </div>
</div>

<!-- Delete measurement -->
<div class="modal fade" bsModal #deleteMeasurementModal="bs-modal" [config]="{ backdrop: 'static' }" tabindex="-1"
  role="dialog" aria-labelledby="dialog-static-name">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple">
        <h6 id="deleteBillDeterminantsModalTitle" class="modal-title pull-left">{{delete}}</h6>
        <button type="button" class="close pull-right" aria-label="Close" (click)="deleteMeasurementModal.hide()">
          <span class="text-white" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label>{{deleteMeasurementMessage}}</label>
        <div class="text-center my-3">

          <button type="button" class="btn btn-success mr-4" (click)="deleteMeasurement()" translate>
            Yes
          </button>
          <button type="button" class="btn btn-secondary"  (click)="deleteMeasurementModal.hide()" translate>
            No
          </button>
        
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Delete Measurement Edit -->
<div class="modal fade" bsModal #deleteMeasurementEditModal="bs-modal" [config]="{ backdrop: 'static' }" tabindex="-1"
  role="dialog" aria-labelledby="dialog-static-name">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-purple">
        <h6 id="deleteBillDeterminantsModalTitle" class="modal-title pull-left">{{delete}}</h6>
        <button type="button" class="close pull-right" aria-label="Close" (click)="deleteMeasurementEditModal.hide()">
          <span class="text-white" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label>{{deleteMeasurementMessage}}</label>
        <div class="text-center my-3">

          <button type="button" class="btn btn-success mr-4" (click)="deleteMeasurementEdit()" translate>
            Yes
          </button>
          <button type="button" class="btn btn-secondary"  (click)="deleteMeasurementEditModal.hide()" translate>
            No
          </button>
        
        
         
        </div>
      </div>
    </div>
  </div>
</div>

<!-- cloneDeviceModal-->
<div class="modal fade" bsModal #cloneDeviceModal="bs-modal" [config]="{ backdrop: 'static' }" tabindex="-1"
  role="dialog" aria-labelledby="dialog-static-name">
  <div class="modal-dialog modal-xs clonedevicemodal">
    <div class="modal-content">
      <div class="modal-header bg-purple">
        <h6 id="acknowledgeTitle" class="modal-title mb-0">{{cloneAsset}}</h6>
        <button type="button" class="close pull-right" aria-label="Close" (click)="cloneDeviceModal.hide()">
          <span class="text-white" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <form #deviceCloneForm="ngForm">
              <div class="form-row">
                <mat-form-field class="example-full-width col-sm-4 col-md-4 col-lg-4">
                  <mat-label for="deviceid">{{assetId}}</mat-label>
                  <input matInput type="text" id="deviceid" name="deviceid" [(ngModel)]="newDevice.assetId" required />
                </mat-form-field>
                <mat-form-field class="example-full-width col-sm-8 col-md-8 col-lg-8">
                  <mat-label for="assetName">{{assetName}}</mat-label>
                  <input matInput type="text" id="assetName" name="assetName" [(ngModel)]="newDevice.assetName"
                    required />
                </mat-form-field>
              </div>
            </form>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="text-center">

            <button class="btn btn-sm btn-secondary mr-2" (click)="cancelClone()" >
              <em class="fa fa-times mr-1"></em>Cancel
            </button>
           
            <button class="btn btn-sm btn-primary mr-2"   (click)="resetClone(deviceCloneForm)" translate>
              <em class="fa fa-refresh mr-1"></em>Reset
            </button>
             
            <button class="btn btn-sm btn-success mr-2" (click)="createDevice(true, true)"
            [disabled]="deviceCloneForm.invalid"translate>
            <em class="fa fa-save mr-1"></em>Save
          </button>


            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Importmodal Picture -->
<div class="modal fade" bsModal #uploadPictureModal="bs-modal" style="background: #00000040"
  [config]="{ backdrop: 'static' }" tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
  <div class="modal-dialog modal-1x">
    <div class="modal-content">
      <div class="modal-header bg-purple text-white pt-1 pb-1">
        <h6 id="uploadPictureModalTitle" class="modal-title pull-left">{{uploadPictures}}</h6>
        <button type="button"class="close pull-right text-white" aria-label="Close" (click)="cancelUploadNewPicture()">
          <span aria-hidden="true" >&times;</span>
        </button>

      </div>
      <div class="modal-body">
        <form #uploadPictureForm="ngForm">
          <div class="form-row">
            <mat-form-field class="example-full-width col-lg-4 col-md-4 col-sm-4 col-12">
              <mat-label for="pictureTitle">{{title1}}</mat-label>
              <input matInput type="text" name="pictureTitle" id="pictureTitle"
                [(ngModel)]="newMemsDevicePicture.pictureTitle" required />
            </mat-form-field>
            <mat-form-field class="example-full-width col-lg-5 col-md-6 col-sm-6 col-12">
              <mat-label for="file">{{selectPicture}}</mat-label>
              <input matInput type="text" id="selectfile" name="selectFile" [(ngModel)]="selectedFileName" required />
            </mat-form-field>
            <div class="form-group col-lg-3 col-md-2 col-sm-2 col-12 mt-4 pt-1">
              <label for="importPictureFile" class="btn btn-sm btn-secondary"><em class="fa fa-folder-open mt-2"></em>
               {{browse}}</label>
              <input type="file" #importPictureFile id="importPictureFile" name="importPictureFile"
                style="display: none" (change)="selectFile($event)" accept="image/*" />
            </div>
          </div>
        </form>
        <div *ngIf="uploadPictureValidationErrorMsg != null" class="mb-2 text-center">
          <span style="color: red">{{ uploadPictureValidationErrorMsg }}</span>
        </div>
        <div class="text-center">
          <button class="btn btn-sm btn-secondary mr-2" (click)="cancelUploadNewPicture()">
            <em class="fa fa-times mr-1"></em> {{cancel}}
          </button>
          <button class="btn btn-sm btn-success" [disabled]="uploadPictureForm.invalid" (click)="uploadNewPicture()">
            <em class="fa fa-upload mr-1"></em> {{upload}}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Show Full Screen Picture -->
<div class="modal fade mt-0" bsModal #showFullPictureModal="bs-modal" style="background: #00000040"
  [config]="{ backdrop: 'static' }" tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
  <button type="button" class="close pull-right closeFullScreen" aria-label="Close" (click)="closeFullScreen()">
    <span aria-hidden="true" style="color: #fff">&times;</span>
  </button>
  <div class="modal-dialog modal-1x">
    <div class="modal-content">
      <div class="modal-body text-center p-0">
        <img style="width: 498px; height: 498px" alt=""
          [src]="'data:image/png;base64,' + fullScreenPicture.pictureData" />
      </div>
    </div>
  </div>
</div>

<!-- Add Notes Popup -->
<div class="modal fade" bsModal #addNewNotesModal="bs-modal" style="background: #00000040"
  [config]="{ backdrop: 'static' }" tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
  <div class="modal-dialog modal-1x">
    <div class="modal-content">
      <div class="modal-header bg-purple text-white pt-1 pb-1">
        <h6 *ngIf="noteIsNew" id="addNewNotesTitle" class="modal-title pull-left">{{addNewNote}}</h6>
        <h6 *ngIf="!noteIsNew" id="addNewNotesTitle" class="modal-title pull-left">{{editNote}}</h6>
        <button type="button" class="close pull-right" aria-label="Close" (click)="cancelAddNote()">
          <span aria-hidden="true" style="color: #fff">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="text-align: end">
        <div style="margin-top: -8px; margin-bottom: 4px; font-size: 12px">
          <span class="text-danger">*</span>{{maximumNoteSizeAllowed}}
        </div>
        <form #addNewNotesForm="ngForm">
          <div class="form-row justify-content-center">
            <button *ngIf="!noteIsNew" class="btn btn-sm btn-primary mt-0 mr-0 ml-auto mb-2" (click)="toggleEditMode()">
              <em class="fa fa-edit mr-1"></em>{{edit}}
            </button>
            <textarea name="note" class="bigtextarea w-100" style="height: 350px" wrap="hard"
              [(ngModel)]="newNote.assetNote" (keyup)="validateCharCount()" (change)="validateCharCount()" required
              [disabled]="!noteIsNew && !noteEditMode"></textarea>
          </div>
        </form>
        <div class="text-center mt-3">

       <button class="btn btn-sm btn-secondary mr-2" (click)="cancelAddNote()" >
              <em class="fa fa-times mr-1"></em>Cancel
            </button>
           
            <button class="btn btn-sm btn-primary mr-2"   (click)="resetNote()" translate>
              <em class="fa fa-refresh mr-1"></em>Reset
            </button>
             
            <button class="btn btn-sm btn-success mr-2"  [disabled]="addNewNotesForm.invalid || (!noteEditMode && !noteIsNew)" (click)="saveNote()"translate>
            <em class="fa fa-save mr-1"></em>Save
          </button>



        </div>
      </div>
    </div>
  </div>
</div>

<!-- View Notes Popup -->
<div class="modal fade" bsModal #viewNotesModal="bs-modal" style="background: #00000040"
  [config]="{ backdrop: 'static' }" tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
  <div class="modal-dialog modal-1x">
    <div class="modal-content">
      <div class="modal-header bg-purple text-white pt-1 pb-1">
        <h6 id="addNewNotesTitle" class="modal-title pull-left">{{viewNote}}</h6>
        <button type="button" class="close pull-right" aria-label="Close" (click)="cancelViewNote()">
          <span aria-hidden="true" style="color: #fff">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #viewNotesForm="ngForm">
          <div class="form-row justify-content-center">
            <textarea name="note" class="bigtextarea w-100" style="height: 350px" wrap="hard"
              [(ngModel)]="newNote.assetNote" disabled></textarea>
          </div>
        </form>

     

        <div class="text-center mt-3">
          <button class="btn btn-sm btn-secondary mr-2" (click)="cancelViewNote()">
            <em class="fa fa-times mr-1"></em> {{close}}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Import Device Configuration -->
<div class="modal fade" bsModal #importDeviceConfigurationModal="bs-modal" [config]="{ backdrop: 'static' }"
  tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-purple text-white pt-1 pb-1">
        <h6 id="dialog-sizes-name2" class="modal-title pull-left mb-0">{{importAssetConfiguration}}</h6>
        <button type="button" class="close pull-right" aria-label="Close"
          (click)="importDeviceConfigurationModal.hide()">
          <span class="text-white" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <label>{{assetConfigurationMessage}}</label>
        <div class="text-center my-3">
          <label for="importDeviceConfigurationCSV" class="btn btn-success me-4 mb-0"
            (click)="importDeviceConfigurationModal.hide()">{{yes}}</label>
          <input type="file" #importDeviceConfigurationCSV id="importDeviceConfigurationCSV"
            name="importDeviceConfigurationCSV" style="display: none"
            (change)="importDeviceConfigurationCSVFile($event)" />
          <button type="button" class="btn btn-secondary ml-2" (click)="importDeviceConfigurationModal.hide()">
            {{no}}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Validation Errors -->
<div class="modal fade" bsModal #importDeviceConfigurationErrorModal="bs-modal" [config]="{ backdrop: 'static' }"
  tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
  <div class="modal-dialog">
    <div class="modal-content modal-val">
      <div class="modal-header bg-purple text-white pt-1 pb-1">
        <h6 class="modal-title pull-left mb-0" id="importDeviceConfigurationErrorModalTitle">{{importFailed}}</h6>
      </div>
      <div class="modal-body text-center">
        <ul class="list-group">
          <li class="list-group-item list-custom" *ngFor="let error of validationErrors">
            <em class="fa fa-times"></em> {{ error }}
          </li>
        </ul>
        <div class="text-center my-3">
          <button type="button" mat-raised-button color="primary"
            (click)="importDeviceConfigurationErrorModal.hide()">{{ok}}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
